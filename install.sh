#!/bin/bash

# ติดตั้ง Git (ถ้ายังไม่มี)
pkg update -y
pkg install git -y

# -----------------------------------------------------------------
# 1. คัดลอกไฟล์ตั้งค่าทั้งหมดจาก dotfiles ไปที่ Home Directory
# -----------------------------------------------------------------
echo "--- คัดลอกไฟล์ตั้งค่าจาก dotfiles ไปที่ Home Directory ---"

# ใช้ cp -r เพื่อคัดลอกเนื้อหาทั้งหมดภายใน dotfiles
# รวมถึงไฟล์/โฟลเดอร์ที่ขึ้นต้นด้วยจุดทั้งหมด (เช่น .termux)
# *หมายเหตุ: การคัดลอกต้องใช้คำสั่ง cp -r dotfiles/.* ~/ เพื่อให้ได้ไฟล์ที่ขึ้นต้นด้วยจุด
cp -r dotfiles/.* ~/

# -----------------------------------------------------------------
# 2. ตรวจสอบและให้สิทธิ์การใช้งาน
# -----------------------------------------------------------------
if [ $? -eq 0 ]; then
    echo "✅ คัดลอก Dotfiles ทั้งหมดสำเร็จ!"
	termux-reload-settings
else
    echo "❌ เกิดข้อผิดพลาดในการคัดลอกไฟล์"
fi

# ตั้งค่าสิทธิ์การใช้งาน (Permissison) สำหรับโฟลเดอร์ .termux เพื่อความปลอดภัย
chmod 700 ~/.termux

echo "โปรดปิดแล้วเปิด Termux ใหม่ หรือเรียกใช้ 'termux-reload-settings' เพื่อดูผลลัพธ์ของธีม"
